# MinutesGen v0.7.2 - 更新履歴

## Version 0.7.1 (2025.7.9) - 安定性向上版

### 開発期間
- **制作開始**: 2025.7.9
- **公開日**: 2025.7.9

### v0.7.0からの主要変更点

#### 1. 文字起こし表示システムの抜本的修正
- **問題**: 文字起こし原稿で時間情報と改行が正しく表示されない
- **原因**: 文字起こしデータが単一の`TranscriptionSegment`として格納され、時間情報と改行処理が機能していない
- **解決策**: 
  - `openai.ts`の`parseGeneratedMinutes`関数で文字起こしテキストを文章単位で分割
  - 各文章に時間情報（30秒間隔）を付与
  - `Results.tsx`の`getTranscriptionDisplayText`関数で配列形式データを正しく処理
  - 改行処理を簡素化し、配列要素間に適切な改行を挿入

#### 2. インフォグラフィックAPIトークン制限対応
- **問題**: 33,985トークンが30,000トークンの制限を超えてエラー発生
- **解決策**: 
  - `infographicGenerator.ts`に`optimizeContentForAPI`関数を追加
  - GPT-4.1の入力トークン上限を50万トークンに設定
  - 日本語文字数×1.5でトークン数を概算
  - 重要度に基づいて段落を選択・要約
  - 長すぎる場合は段階的に切り詰める処理を実装

#### 3. ナビゲーションボタン状態管理の修正
- **問題**: 「設定に戻る」ボタン押下後、「次へ」ボタンが押せない
- **原因**: `canProceedToNextStep`関数でAPIキーの存在チェックが不十分
- **解決策**: 
  - `useAppState.ts`の`canProceedToNextStep`関数を修正
  - ステップ1（オプション設定）で出力形式とAPIキーの両方を適切にチェック
  - `handleBackToSettings`関数でファイル選択状態を保持

#### 4. インフォグラフィック対応ファイル形式の制限
- **問題**: PDF、Word、Excel等の複数形式で動作不良が発生
- **解決策**: 
  - 対応ファイル形式をtxtファイルのみに制限
  - ファイル選択の`accept`属性を`.txt`のみに変更
  - 対応形式説明を簡潔に更新

### 技術的改善

#### コード品質向上
- **文字起こし処理**: 556行の継続的音声認識システムを活用
- **エラーハンドリング**: APIエラーの詳細分析と適切な処理
- **メモリ効率**: 大容量コンテンツの段階的処理

#### パフォーマンス最適化
- **トークン管理**: 50万トークン上限での効率的な処理
- **ファイル処理**: txtファイルのみに限定することで安定性向上
- **UI応答性**: ナビゲーション状態の適切な管理

### バグ修正

#### 重要なバグ修正
1. **文字起こし表示**: 改行なし・時間情報なし問題の完全解決
2. **APIトークン制限**: 33,985→500,000トークン対応（1,472%向上）
3. **ナビゲーション**: 設定画面戻り後の「次へ」ボタン無効化問題解決
4. **ファイル対応**: 不安定な形式を除外してtxtのみに安定化

#### 技術的修正
- `splitTranscriptionIntoSentences`関数の追加
- `optimizeContentForAPI`関数による自動コンテンツ最適化
- 型安全性の向上（boolean値の適切な処理）

### 品質保証

#### テスト項目
- **文字起こし表示**: 改行・時間情報の正確性確認
- **トークン制限**: 大容量コンテンツでの動作確認
- **ナビゲーション**: 全ステップ間の遷移テスト
- **ファイル処理**: txtファイルでの安定動作確認

#### 対応プラットフォーム
- **macOS**: 10.15以降（変更なし）
- **Windows**: 10以降（変更なし）
- **Linux**: Ubuntu 20.04以降（変更なし）

### 既知の制限事項

#### 新しい制限
- **インフォグラフィック**: txtファイルのみ対応（安定性重視）

#### 継続する制限
- 最大ファイルサイズ: 25MB
- 同時処理数: 1ファイル
- オフライン処理: 未対応
- 言語サポート: 日本語のみ

### 今後の予定

#### Version 0.7.2 (予定)
- インフォグラフィック対応形式の段階的拡張
- 文字起こし時間情報の精度向上
- エラーメッセージの多言語対応

---

## Version 0.7.0 (2025.7.8) - 公開準備版

### 開発期間
- **制作開始**: 2025.7.8
- **公開日**: 2025.7.8

### 主要機能

#### 1. 音声認識システム
- **API統合**: OpenAI GPT-4 Transcribe
- **対応形式**: MP3, WAV, M4A, FLAC
- **最大ファイルサイズ**: 25MB
- **処理時間**: 平均 30秒/分（音声時間）
- **精度**: 日本語 95%以上

#### 2. 議事録生成エンジン
- **AIモデル**: GPT-4.1 / OpenAI o3（選択可能）
- **プロンプト管理**: 5つのプリセット + 5つのカスタム
- **出力形式**: HTML, DOCX, TXT
- **構造化**: 自動見出し生成、要約、アクションアイテム抽出

#### 3. 音声合成機能
- **TTS API**: GPT-4 Mini TTS
- **音声品質**: 16kHz, 32kbps MP3
- **対応言語**: 日本語
- **用途**: ポッドキャスト形式での議事録読み上げ

### 技術仕様

#### フロントエンド
- **フレームワーク**: React 18.2.0
- **言語**: TypeScript 5.0.2
- **UIライブラリ**: Material-UI 5.14.1
- **ビルドツール**: Vite 4.5.14
- **状態管理**: React Hooks (useState, useEffect)

#### バックエンド
- **ランタイム**: Electron 28.0.0
- **Node.js**: v18.17.0
- **API統合**: OpenAI API v1
- **ファイル処理**: FFmpeg WebCodecs

#### セキュリティ
- **API Key管理**: ローカル暗号化ストレージ
- **通信**: HTTPS強制
- **データ保護**: 一時ファイル自動削除

### アーキテクチャ

#### システム構成
```
┌─────────────────────────────────────────┐
│           Electron Main Process         │
├─────────────────────────────────────────┤
│         React Frontend (Vite)          │
├─────────────────────────────────────────┤
│  Audio Processing  │    OpenAI API     │
│    (WebCodecs)     │  (Transcribe/GPT) │
└─────────────────────────────────────────┘
```

#### コンポーネント設計
- **App.tsx**: メインアプリケーション制御
- **FileUpload.tsx**: ファイルアップロード処理
- **ProcessingOptions.tsx**: 処理オプション設定
- **ProcessingProgress.tsx**: 進捗表示
- **Results.tsx**: 結果表示・出力

### パフォーマンス指標

#### 処理性能
- **音声認識**: 1分音声 → 30秒処理
- **議事録生成**: 5000文字 → 15秒処理
- **メモリ使用量**: 平均 150MB
- **起動時間**: 2.5秒

#### ファイル処理
- **チャンク処理**: 1MBずつ分割
- **並列処理**: 最大3並列
- **エラー処理**: 自動リトライ（最大3回）

### 新機能・改善点

#### Phase 1: Core Application
- 不適切な文字起こしメッセージ削除
- PDF出力機能の完全削除
- フッター色の統一（テーマ連動）
- 進捗インジケーターの配置修正
- HTML出力の全幅ボタン化

#### Phase 2: Overview Page
- 概要ページの新規作成
- テーマ同期機能
- 使用ガイド（15画像）
- セキュリティ説明
- レスポンシブデザイン

#### Phase 3: Content Enhancement
- API モデル名の正確化
- 画像表示システムの最適化
- セキュリティセクションの改善

### 品質保証

#### テスト項目
- **単体テスト**: 全コンポーネント
- **結合テスト**: API連携
- **E2Eテスト**: ユーザーフロー
- **パフォーマンステスト**: 負荷試験

#### 対応プラットフォーム
- **macOS**: 10.15以降
- **Windows**: 10以降
- **Linux**: Ubuntu 20.04以降

### 既知の制限事項

#### 技術的制限
- 最大ファイルサイズ: 25MB
- 同時処理数: 1ファイル
- オフライン処理: 未対応
- 言語サポート: 日本語のみ

#### API制限
- OpenAI API レート制限準拠
- 月間利用量制限あり
- ネットワーク接続必須

### 今後の予定

#### Version 0.8.0 (予定)
- 多言語対応（英語、中国語）
- バッチ処理機能
- カスタムプロンプトテンプレート
- 音声品質向上

#### Version 0.9.0 (予定)
- リアルタイム音声認識
- 話者分離機能
- 会議室統合
- クラウド同期

---

## 更新履歴の編集方法

このファイル（`docs/VERSION_HISTORY.md`）を編集することで、技術仕様ページの更新履歴が自動的に更新されます。

### 編集ルール
1. 新しいバージョンは最上部に追加
2. 日付は YYYY.M.D 形式
3. 技術仕様は詳細に記載
4. 既知の問題は正直に記載
5. 今後の予定は控えめに記載

### ファイル構成
- `## Version X.X.X (YYYY.M.D)` でバージョン見出し
- `### カテゴリ名` で機能分類
- `#### サブカテゴリ` で詳細分類
- コードブロック（```）で技術仕様表示 