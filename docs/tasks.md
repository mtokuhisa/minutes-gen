# MinutesGen 実装計画・タスク管理

## 1. 開発ルールと規約

### 1.1. 基本原則
- **品質第一**: 動作する高品質なコードを最優先とする。
- **ユーザー体験重視**: 直感的で使いやすいUI/UXを追求する。
- **保守性**: 可読性と拡張性を考慮し、将来の変更が容易なコードを記述する。
- **セキュリティ**: APIキー管理とユーザーデータの保護を最優先事項とする。

### 1.2. コーディング規約
- **言語**: TypeScriptを必須とし、`any`型の使用は原則禁止する。
- **フォーマット**: PrettierとESLintによるフォーマットを強制する。CIでのチェックを推奨。
- **命名規則**:
    - 変数・関数: `camelCase`
    - クラス・型・インターフェース・Reactコンポーネント: `PascalCase`
- **コメント**: 複雑なロジックや重要な決定事項にはコメントを残す。JSDoc形式を推奨。

### 1.3. Git利用ルール
- **ブランチ戦略**: `main`ブランチを保護し、機能追加やバグ修正はフィーチャーブランチ（例: `feature/xxx`, `fix/xxx`）を作成して作業する。
- **コミットメッセージ**: `feat:`, `fix:`, `docs:`, `style:`, `refactor:`, `test:`, `chore:` などのConventional Commitsに従う。

## 2. 開発環境

- **セットアップ**: `npm install` を実行して依存関係をインストールする。
- **開発サーバー起動**: `npm run dev` を実行する。
- **ビルド**: `npm run build` を実行する。
- **パッケージ作成**: `npm run package` を実行する。

## 3. 現在の課題とTODOリスト

### 🔥 緊急 (最優先)
- [x] **テキストファイルのチャンク処理**: 大容量テキストファイル（.txt, .docx）を読み込む際に、ファイル全体を一度にメモリに読み込まず、ストリームやチャンクで処理するようにリファクタリングする。
- [x] **入力サイズの事前チェック**: ファイルアップロード時にトークン数を推定し、API制限を超える可能性がある場合はユーザーに警告を表示する。
- [ ] **PDF処理の`max_tokens`増加**: `fileProcessor.ts`におけるPDF処理時の`max_tokens`を16,000からより大きな値（例: 50,000）に引き上げ、大きなPDFの内容が途切れる問題に対処する。

### ⚡高優先度
- [ ] **PDF File APIの形式修正**: OpenAI APIの最新仕様に合わせ、`file_search` toolなどの利用を検討し、API呼び出し部分を修正する。
- [ ] **`optimizeContentForAPI`関数の実装**: `infographicGenerator.ts`等に存在するコンテンツ最適化（要約・切り詰め）ロジックを、実際の処理フローに組み込む。
- [ ] **モデル別制限管理**: モデルごと（GPT-4o, GPT-4.1, o3）のトークン制限値を定数化し、APIリクエスト時に動的にチェックする機構を実装する。

### 🔧 中優先度
- [ ] **OCR処理の改善**: 画像ベースのPDFに対応するため、OCR処理のプロンプトをより詳細化し、精度を向上させる。
- [ ] **エラーメッセージの改善**: トークン制限超過時などに、ユーザーが次何をすべきか理解できるような、より具体的なエラーメッセージを表示する。
- [ ] **テキスト分割処理の高度化**: 現在の文字数ベースの分割に加え、意味的な区切りを考慮した高度なチャンキング処理を実装する。

## 4. 今後の開発ロードマップ

### v0.8.0 (次期バージョン)
- [ ] **議事録編集機能**: ユーザーが議事録結果を編集出来、編集中に「置き換え」した単語については自動で辞書化。編集終了後、各形式での出力やポッドキャスト・インフォグラフィック生成の元原稿とできる
- [ ] **辞書機能**: ユーザーが専門用語や固有名詞を登録し、文字起こしの精度を向上させるための辞書機能を追加する。
- [ ] **ポッドキャスト・インフォグラフィック生成物の保持**: ポッドキャスト・インフォグラフィックを生成しながら矢、生成後に他タブに切り替えても、進行をバックグラウンドで続け、また結果を再度確認することが可能


### v0.8.1
- [ ] **並行文字起こし処理**: 複数の音声セグメントを並行してAPIに送信し、全体の処理時間を短縮する。
- [ ] **多言語対応**: UIと議事録生成機能において、英語・中国語など多言語に対応する。
- [ ] **カスタムプロンプトテンプレート**: ユーザーが作成したプロンプトをテンプレートとして保存し、チーム内で共有できる機能を追加する。
- [ ] **カスタムプロンプト化**: ポッドキャスト・インフォグラフィックの生成プロンプトをユーザー側で変更、保存することができる。ポッドキャストについては音声設定プロンプトも変更可能に。

### v0.9.0
- [ ] **リアルタイム音声認識**: マイクからのリアルタイム入力に対応し、ライブでの文字起こしを実現する。
- [ ] **話者分離機能の強化**: AIによる話者分離（Diarization）の精度を向上させる。
- [ ] **クラウド同期**: 設定やプロンプト、辞書などをクラウド経由で同期し、複数デバイス間で同じ環境を再現できるようにする。
